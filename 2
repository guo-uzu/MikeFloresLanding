import { useState } from "react";

import AcabemosConElAbandonoDeMenores from "@assets/AcabemosConElAbandonoDeMenores.jpg";
import DiaDeLaFamiliaNeolenesa from "@assets/DiaDeLaFamiliaNeolenesa.jpg";
import ElPresidenteDeLasNinez from "@assets/ElPresidenteDeLasNinez.jpg";
import TrumpAranceles from "@assets/TrumpAranceles.jpg";

import ArrowLeft from "@assets/ArrowLeft.svg";
import ArrowRight from "@assets/ArrowRight.svg";

const imagePool = [
    {src: AcabemosConElAbandonoDeMenores.src, title: "Acabemos con el abandono de menores", date: "04 abril 2025", link : "https://abcnoticias.mx/opinion/2025/4/4/acabemos-con-el-abandono-de-menores-245145.html"},
    {src: DiaDeLaFamiliaNeolenesa.src, title: "El presente de la niñez, el futuro de Nuevo León", date: "02 abril 2025", link : "https://www.elhorizonte.mx/opinion/el-presente-de-la-ninez-el-futuro-de-nuevo-leon/7536825636"},
    {src: DiaDeLaFamiliaNeolenesa.src, title: "Otra vez Trump, otra vez aranceles", date: "28 marzo 2025", link : "https://abcnoticias.mx/opinion/2025/3/28/otra-vez-trump-otra-vez-aranceles-244396.html"},
    {src: DiaDeLaFamiliaNeolenesa.src, title: "Coordinación municipal, clave para Nuevo León", date: "26 marzo 2025", link : "https://www.elhorizonte.mx/opinion/coordinacion-municipal-clave-para-nuevo-leon/5379940264"},
    {src: DiaDeLaFamiliaNeolenesa.src, title: "Cuidemos a quienes nos cuidan", date: "21 marzo 2025", link : "https://www.elhorizonte.mx/opinion/coordinacion-municipal-clave-para-nuevo-leon/5379940264"},
    {src: DiaDeLaFamiliaNeolenesa.src, title: "Día de la familia neoleonesa", date: "19 marzo 2025", link : "https://www.elhorizonte.mx/opinion/dia-de-la-familia-neoleonesa/4914321034"},
    {src: DiaDeLaFamiliaNeolenesa.src, title: "Nuevo León, un héroe en cada bombero te dio", date: "14 marzo 2025", link : "https://abcnoticias.mx/opinion/2025/3/14/nuevo-leon-un-heroe-en-cada-bombero-te-dio-243036.html"},
    {src: DiaDeLaFamiliaNeolenesa.src, title: "Un mes a la vez", date: "12 marzo 2025", link : "https://www.elhorizonte.mx/opinion/un-mes-a-la-vez/4312682353"},
    {src: DiaDeLaFamiliaNeolenesa.src, title: "Un respiro para Nuevo León", date: "05 Marzo 2025", link : "https://www.elhorizonte.mx/opinion/un-respiro-para-nuevo-leon/7255987433"},
    {src: DiaDeLaFamiliaNeolenesa.src, title: "Nuevo fiscal, nueva Fiscalía", date: "26 febrero 2025", link : "https://www.elhorizonte.mx/opinion/nuevo-fiscal-nueva-fiscalia/7363875780"},
    {src: DiaDeLaFamiliaNeolenesa.src, title: "Ganó Nuevo León", date: "19 febrero 2025", link : "https://www.elhorizonte.mx/opinion/gano-nuevo-leon/7805645374"},
    {src: DiaDeLaFamiliaNeolenesa.src, title: "Cuidemos a quienes nos cuidan", date: "21 marzo 2025", link : "https://www.elhorizonte.mx/opinion/coordinacion-municipal-clave-para-nuevo-leon/5379940264"},
    {src: DiaDeLaFamiliaNeolenesa.src, title: "Cuidemos a quienes nos cuidan", date: "21 marzo 2025", link : "https://www.elhorizonte.mx/opinion/coordinacion-municipal-clave-para-nuevo-leon/5379940264"},
    {src: DiaDeLaFamiliaNeolenesa.src, title: "Cuidemos a quienes nos cuidan", date: "21 marzo 2025", link : "https://www.elhorizonte.mx/opinion/coordinacion-municipal-clave-para-nuevo-leon/5379940264"},
    {src: DiaDeLaFamiliaNeolenesa.src, title: "Cuidemos a quienes nos cuidan", date: "21 marzo 2025", link : "https://www.elhorizonte.mx/opinion/coordinacion-municipal-clave-para-nuevo-leon/5379940264"},
];

const MAX_ITEMS = 4;

const Columna = () => {
  const [startIndex, setStartIndex] = useState(0);

  const getVisibleImages = () => {
    return Array.from({ length: MAX_ITEMS }).map((_, i) => {
      const index = (startIndex + i) % imagePool.length;
      return imagePool[index];
    });
  };

  const handleNext = () => {
    setStartIndex((prev) => (prev + 1) % imagePool.length);
  };

  const handlePrev = () => {
    setStartIndex((prev) =>
      (prev - 1 + imagePool.length) % imagePool.length
    );
  };

  return (
    <section className="">
    <div className="relative max-w-[1000px] mx-auto">
        <div className="relative flex gap-2 h-[500px] justify-center font-montserrat">
            {getVisibleImages().map((element, i) => (
                <a href={element.link} target="_blank">
                <div key={i} className="flex relative opacity-70 hover:opacity-110 max-w-[200px] w-full h-full hover:max-w-[400px] transition-all">
                    <img
                      className="grow object-cover rounded-md"
                      src={element.src}
                      alt={`img-${i}`} />
                    <div class="absolute p-4 text-white">
                        <p class="font-regular text-2xl">{element.title}</p>
                        <p class="font-regular text-md px-2">({element.date})</p>
                    </div>
                    <div className="absolute bottom-0 w-full p-2  font-bold text-orange-500">
                        <p className="bg-white w-full rounded-xl pl-2">Leer más</p>
                    </div>
              </div>
                </a>
              
            ))}
        </div>
          <img
            src={ArrowLeft.src}
            onClick={handlePrev}
            className="absolute top-1/2 left-0 transform -translate-y-1/2 w-[30px] h-auto cursor-pointer z-10"
            alt="Flecha izquierda"
          />
          <img
            src={ArrowRight.src}
            onClick={handleNext}
            className="absolute top-1/2 right-0 transform -translate-y-1/2 w-[30px] h-auto cursor-pointer z-10"
            alt="Flecha derecha"
          />
    </div>
  </section>
  );
};

export default Columna;

